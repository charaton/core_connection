<!DOCTYPE html>
<html>
<head>
  <title>CoreConnection</title>
  <link href='https://fonts.googleapis.com/css?family=Montserrat:400,700|Open+Sans:400,300' rel='stylesheet' type='text/css'>
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= csrf_meta_tags %>
</head>
<body>
  <div class="container-fluid no-padding">
    <header>
      <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container-fluid-nav">
          <!-- Dropdown buttons on right side-->
          <div class="collapse navbar-collapse" id="coreconnection-navbar">
            <ul class="nav navbar-nav navbar-right">

              <!-- Dropdown button for students list -->
              <li>
                <div class="dropdown">
                <span class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">View Students<span class="caret"></span></span>
                  <ul class="dropdown-menu">
                    <li><%= link_to "Available Students", profiles_path(available: true), remote: true, class: "filter-students text-upcase" %></li>
                    <li role="separator" class="divider"></li>
                    <li><%= link_to "All Students", profiles_path(all: true), remote: true, class: "filter-students text-upcase" %></li>
                  </ul>
                </div>
              </li>

              <!-- Create a dropdown button for all the user options -->
              <li>
                <div class="dropdown">
                <span class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                  <% if user_signed_in? && current_user_profile%>
                    <% unless current_user_profile.photo.nil? %>
                     <%= image_tag current_user_profile.photo.url(:menu_icon), class: "user-icon"%>
                    <% end %>
                    Account
                  <% else %>
                    Account
                  <% end %>
                  <span class="caret"></span></span>
                  <ul class="dropdown-menu">
                    <li>
                      <%# checks if user is signed in %>
                      <% if user_signed_in? %>
                        <li><%= link_to "User Settings", edit_user_path(current_user), class: "text-upcase" %></li>
                        <li role="separator" class="divider"></li>
                        <%# checks if user has already created a profile  %>
                        <% if current_user_profile %>
                          <li><%= link_to "View Profile", profile_path(current_user_profile), class: "text-upcase" %></li>
                          <li role="separator" class="divider"></li>
                        <% else %>
                          <li><%= link_to "Create Profile", new_profile_path, class: "text-upcase"%></li>

                        <% end %>
                        <li><%= link_to "Log Out", sessions_path, method: :delete, data: {confirm: "Are you sure you want to logout?"}, class: "text-upcase" %></li>
                      <% else %>
                        <li><%= link_to "Log In", new_session_path, class: "text-upcase" %></li>
                        <li role="separator" class="divider"></li>
                        <li><%= link_to "Sign Up", new_user_path, class: "text-upcase" %></li>
                      <% end %>
                    </li>
                  </ul>
                </div>
              </li> <!-- end of li for user options -->
            </ul> <!-- end of ul for right side navbar -->
          </div> <!-- end of div for dropdowns -->

          <!-- Brand and toggle get grouped for better mobile display  DO NOT REMOVE!!-->
          <ul class="nav navbar-nav navbar-left">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#coreconnection-navbar" aria-expanded="false">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <%= link_to image_tag("codecorelogo.png"), root_path, class: "filter-none" %>
          </ul>
        </div><!-- /.container-fluid -->
      </nav>

    </header>

    <div class="container-fluid">
      <% if notice %>
        <div class="alert alert-success"><%= notice %></div>
      <% end %>
      <% if alert %>
        <div class="alert alert-danger"><%= alert %></div>
      <% end %>
    </div>

    <div class="container-fluid primary-content">
      <%= yield %>
    </div>

  </div>
</body>
</html>
